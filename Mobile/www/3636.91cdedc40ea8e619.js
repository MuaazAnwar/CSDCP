"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3636],{5961:(X,M,m)=>{m.d(M,{GW:()=>Z,dk:()=>p,oK:()=>d});var d=function(P){return P.Prompt="PROMPT",P.Camera="CAMERA",P.Photos="PHOTOS",P}(d||{}),Z=function(P){return P.Rear="REAR",P.Front="FRONT",P}(Z||{}),p=function(P){return P.Uri="uri",P.Base64="base64",P.DataUrl="dataUrl",P}(p||{})},2726:(X,M,m)=>{m.d(M,{Uw:()=>J,fo:()=>B,xz:()=>t});var d=m(5861);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var L=function(n){return n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE",n}(L||{});class t extends Error{constructor(e,r,i){super(e),this.message=e,this.code=r,this.data=i}}const G=n=>{var e,r,i,a,o;const u=n.CapacitorCustomPlatform||null,l=n.Capacitor||{},w=l.Plugins=l.Plugins||{},g=n.CapacitorPlatforms,S=(null===(e=null==g?void 0:g.currentPlatform)||void 0===e?void 0:e.getPlatform)||(()=>null!==u?u.name:(n=>{var e,r;return null!=n&&n.androidBridge?"android":null!==(r=null===(e=null==n?void 0:n.webkit)||void 0===e?void 0:e.messageHandlers)&&void 0!==r&&r.bridge?"ios":"web"})(n)),de=(null===(r=null==g?void 0:g.currentPlatform)||void 0===r?void 0:r.isNativePlatform)||(()=>"web"!==S()),fe=(null===(i=null==g?void 0:g.currentPlatform)||void 0===i?void 0:i.isPluginAvailable)||(h=>{const v=N.get(h);return!!(null!=v&&v.platforms.has(S())||se(h))}),se=(null===(a=null==g?void 0:g.currentPlatform)||void 0===a?void 0:a.getPluginHeader)||(h=>{var v;return null===(v=l.PluginHeaders)||void 0===v?void 0:v.find($=>$.name===h)}),N=new Map,Pe=(null===(o=null==g?void 0:g.currentPlatform)||void 0===o?void 0:o.registerPlugin)||((h,v={})=>{const $=N.get(h);if($)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),$.proxy;const E=S(),j=se(h);let I;const ve=function(){var y=(0,d.Z)(function*(){return!I&&E in v?I=I="function"==typeof v[E]?yield v[E]():v[E]:null!==u&&!I&&"web"in v&&(I=I="function"==typeof v.web?yield v.web():v.web),I});return function(){return y.apply(this,arguments)}}(),q=y=>{let U;const C=(...x)=>{const k=ve().then(_=>{const O=((y,U)=>{var C,x;if(!j){if(y)return null===(x=y[U])||void 0===x?void 0:x.bind(y);throw new t(`"${h}" plugin is not implemented on ${E}`,L.Unimplemented)}{const k=null==j?void 0:j.methods.find(_=>U===_.name);if(k)return"promise"===k.rtype?_=>l.nativePromise(h,U.toString(),_):(_,O)=>l.nativeCallback(h,U.toString(),_,O);if(y)return null===(C=y[U])||void 0===C?void 0:C.bind(y)}})(_,y);if(O){const z=O(...x);return U=null==z?void 0:z.remove,z}throw new t(`"${h}.${y}()" is not implemented on ${E}`,L.Unimplemented)});return"addListener"===y&&(k.remove=(0,d.Z)(function*(){return U()})),k};return C.toString=()=>`${y.toString()}() { [capacitor code] }`,Object.defineProperty(C,"name",{value:y,writable:!1,configurable:!1}),C},le=q("addListener"),ce=q("removeListener"),we=(y,U)=>{const C=le({eventName:y},U),x=function(){var _=(0,d.Z)(function*(){const O=yield C;ce({eventName:y,callbackId:O},U)});return function(){return _.apply(this,arguments)}}(),k=new Promise(_=>C.then(()=>_({remove:x})));return k.remove=(0,d.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield x()}),k},V=new Proxy({},{get(y,U){switch(U){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return j?we:le;case"removeListener":return ce;default:return q(U)}}});return w[h]=V,N.set(h,{name:h,proxy:V,platforms:new Set([...Object.keys(v),...j?[E]:[]])}),V});return l.convertFileSrc||(l.convertFileSrc=h=>h),l.getPlatform=S,l.handleError=h=>n.console.error(h),l.isNativePlatform=de,l.isPluginAvailable=fe,l.pluginMethodNoop=(h,v,$)=>Promise.reject(`${$} does not have an implementation of "${v}".`),l.registerPlugin=Pe,l.Exception=t,l.DEBUG=!!l.DEBUG,l.isLoggingEnabled=!!l.isLoggingEnabled,l.platform=l.getPlatform(),l.isNative=l.isNativePlatform(),l},A=(n=>n.Capacitor=G(n))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),B=A.registerPlugin;class J{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,r){var i=this;this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(r);const o=this.windowListeners[e];o&&!o.registered&&this.addWindowListener(o);const u=function(){var w=(0,d.Z)(function*(){return i.removeListener(e,r)});return function(){return w.apply(this,arguments)}}(),l=Promise.resolve({remove:u});return Object.defineProperty(l,"remove",{value:(w=(0,d.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield u()}),function(){return w.apply(this,arguments)})}),l;var w}removeAllListeners(){var e=this;return(0,d.Z)(function*(){e.listeners={};for(const r in e.windowListeners)e.removeWindowListener(e.windowListeners[r]);e.windowListeners={}})()}notifyListeners(e,r){const i=this.listeners[e];i&&i.forEach(a=>a(r))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,r){this.windowListeners[r]={registered:!1,windowEventName:e,pluginEventName:r,handler:i=>{this.notifyListeners(r,i)}}}unimplemented(e="not implemented"){return new A.Exception(e,L.Unimplemented)}unavailable(e="not available"){return new A.Exception(e,L.Unavailable)}removeListener(e,r){var i=this;return(0,d.Z)(function*(){const a=i.listeners[e];if(!a)return;const o=a.indexOf(r);i.listeners[e].splice(o,1),i.listeners[e].length||i.removeWindowListener(i.windowListeners[e])})()}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const R=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),F=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class oe extends J{getCookies(){return(0,d.Z)(function*(){const e=document.cookie,r={};return e.split(";").forEach(i=>{if(i.length<=0)return;let[a,o]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=F(a).trim(),o=F(o).trim(),r[a]=o}),r})()}setCookie(e){return(0,d.Z)(function*(){try{const r=R(e.key),i=R(e.value),a=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),u=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${r}=${i||""}${a}; path=${o}; ${u};`}catch(r){return Promise.reject(r)}})()}deleteCookie(e){return(0,d.Z)(function*(){try{document.cookie=`${e.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}})()}clearCookies(){return(0,d.Z)(function*(){try{const e=document.cookie.split(";")||[];for(const r of e)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}})()}clearAllCookies(){var e=this;return(0,d.Z)(function*(){try{yield e.clearCookies()}catch(r){return Promise.reject(r)}})()}}B("CapacitorCookies",{web:()=>new oe});const Y=function(){var n=(0,d.Z)(function*(e){return new Promise((r,i)=>{const a=new FileReader;a.onload=()=>{const o=a.result;r(o.indexOf(",")>=0?o.split(",")[1]:o)},a.onerror=o=>i(o),a.readAsDataURL(e)})});return function(r){return n.apply(this,arguments)}}();class f extends J{request(e){return(0,d.Z)(function*(){const r=((n,e={})=>{const r=Object.assign({method:n.method||"GET",headers:n.headers},e),a=((n={})=>{const e=Object.keys(n);return Object.keys(n).map(a=>a.toLocaleLowerCase()).reduce((a,o,u)=>(a[o]=n[e[u]],a),{})})(n.headers)["content-type"]||"";if("string"==typeof n.data)r.body=n.data;else if(a.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[u,l]of Object.entries(n.data||{}))o.set(u,l);r.body=o.toString()}else if(a.includes("multipart/form-data")||n.data instanceof FormData){const o=new FormData;if(n.data instanceof FormData)n.data.forEach((l,w)=>{o.append(w,l)});else for(const l of Object.keys(n.data))o.append(l,n.data[l]);r.body=o;const u=new Headers(r.headers);u.delete("content-type"),r.headers=u}else(a.includes("application/json")||"object"==typeof n.data)&&(r.body=JSON.stringify(n.data));return r})(e,e.webFetchExtra),i=((n,e=!0)=>n?Object.entries(n).reduce((i,a)=>{const[o,u]=a;let l,w;return Array.isArray(u)?(w="",u.forEach(g=>{l=e?encodeURIComponent(g):g,w+=`${o}=${l}&`}),w.slice(0,-1)):(l=e?encodeURIComponent(u):u,w=`${o}=${l}`),`${i}&${w}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),a=i?`${e.url}?${i}`:e.url,o=yield fetch(a,r),u=o.headers.get("content-type")||"";let w,g,{responseType:l="text"}=o.ok?e:{};switch(u.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":g=yield o.blob(),w=yield Y(g);break;case"json":w=yield o.json();break;default:w=yield o.text()}const D={};return o.headers.forEach((S,Q)=>{D[Q]=S}),{data:w,headers:D,status:o.status,url:o.url}})()}get(e){var r=this;return(0,d.Z)(function*(){return r.request(Object.assign(Object.assign({},e),{method:"GET"}))})()}post(e){var r=this;return(0,d.Z)(function*(){return r.request(Object.assign(Object.assign({},e),{method:"POST"}))})()}put(e){var r=this;return(0,d.Z)(function*(){return r.request(Object.assign(Object.assign({},e),{method:"PUT"}))})()}patch(e){var r=this;return(0,d.Z)(function*(){return r.request(Object.assign(Object.assign({},e),{method:"PATCH"}))})()}delete(e){var r=this;return(0,d.Z)(function*(){return r.request(Object.assign(Object.assign({},e),{method:"DELETE"}))})()}}B("CapacitorHttp",{web:()=>new f})},3636:(X,M,m)=>{m.r(M),m.d(M,{UploadImagePageModule:()=>K});var d=m(6814),Z=m(95),p=m(6761),P=m(3044),W=m(5861),ee=m(2726),T=m(5961);const L=(0,ee.fo)("Camera",{web:()=>m.e(6468).then(m.bind(m,6468)).then(s=>new s.CameraWeb)});var t=m(6689),H=m(813),G=m(8926),te=m(9671),A=m(7294);function B(s,b){if(1&s){const f=t.EpF();t.TgZ(0,"ion-button",19),t.NdJ("click",function(){t.CHM(f);const n=t.oxw();return t.KtG(n.takeFirstPicture())}),t._UZ(1,"ion-icon",20),t.qZA()}}function ne(s,b){if(1&s&&t._UZ(0,"ion-img",21),2&s){const f=t.oxw();t.Q6J("src",f.firstPicture.dataUrl)}}function re(s,b){if(1&s){const f=t.EpF();t.TgZ(0,"ion-button",19),t.NdJ("click",function(){t.CHM(f);const n=t.oxw();return t.KtG(n.takeSecondPicture())}),t._UZ(1,"ion-icon",20),t.qZA()}}function J(s,b){if(1&s&&t._UZ(0,"ion-img",21),2&s){const f=t.oxw();t.Q6J("src",f.secondPicture.dataUrl)}}function ie(s,b){if(1&s){const f=t.EpF();t.TgZ(0,"ion-button",19),t.NdJ("click",function(){t.CHM(f);const n=t.oxw();return t.KtG(n.takeThirdPicture())}),t._UZ(1,"ion-icon",20),t.qZA()}}function R(s,b){if(1&s&&t._UZ(0,"ion-img",21),2&s){const f=t.oxw();t.Q6J("src",f.thirdPicture.dataUrl)}}function F(s,b){if(1&s&&(t.TgZ(0,"ion-select-option",22),t._uU(1),t.qZA()),2&s){const f=b.$implicit;t.Q6J("value",f.id),t.xp6(1),t.Oqu(f.labelName)}}const ae=[{path:"",component:(()=>{var s;class b{constructor(c,n,e,r,i,a){this.httpService=c,this.menu=n,this.alertService=e,this.dataService=r,this.RuntimeConfig=i,this.loadingController=a,this.firstPicture={},this.secondPicture={},this.thirdPicture={},this.labelsList=[],this.label=null}ngOnInit(){}takeFirstPicture(){var c=this;return(0,W.Z)(function*(){c.firstPicture=yield L.getPhoto({resultType:T.dk.DataUrl,source:T.oK.Camera,quality:100})})()}takeSecondPicture(){var c=this;return(0,W.Z)(function*(){c.secondPicture=yield L.getPhoto({resultType:T.dk.DataUrl,source:T.oK.Camera,quality:100})})()}takeThirdPicture(){var c=this;return(0,W.Z)(function*(){c.thirdPicture=yield L.getPhoto({resultType:T.dk.DataUrl,source:T.oK.Camera,quality:100})})()}fetchLabelsList(){this.RuntimeConfig.useMockResponse?this.labelsList=[{id:1,labelName:"Pizza"},{id:2,labelName:"Burger"}]:this.httpService.get("/data_label/list").subscribe(c=>{console.log(c),this.labelsList=c},c=>{console.log(c),this.alertService.presentErrorAlertIWithoutButton(c.message)})}ionViewWillEnter(){this.menu.close(),this.firstPicture={},this.secondPicture={},this.thirdPicture={},this.label=null,this.fetchLabelsList()}dataUrlToBlob(c){const n=c.split(","),e=n[0].match(/:(.*?);/)[1],r=atob(n[1]),i=new Uint8Array(r.length);for(let a=0;a<r.length;a++)i[a]=r.charCodeAt(a);return new Blob([i],{type:e})}uploadImages(){if(this.RuntimeConfig.useMockResponse)this.presentLoading().then(c=>{setTimeout(()=>{c.dismiss()},2e3)});else{let c=new FormData;c.append("Image1",this.dataUrlToBlob(this.firstPicture.dataUrl)),c.append("Image2",this.dataUrlToBlob(this.secondPicture.dataUrl)),c.append("Image3",this.dataUrlToBlob(this.thirdPicture.dataUrl)),c.append("ContributedBy",this.dataService.getData("userId")),c.append("Label",this.label),this.presentLoading().then(n=>{this.httpService.post("/data_item",c).subscribe(e=>{n.dismiss(),this.alertService.presentSuccessAlert(e.message)},e=>{n.dismiss(),console.log(e),this.alertService.presentErrorAlertIWithoutButton(e.error)})})}this.firstPicture={},this.secondPicture={},this.thirdPicture={},this.label=null}presentLoading(){var c=this;return(0,W.Z)(function*(){const n=yield c.loadingController.create({message:"Saving Contribution..."});return yield n.present(),n})()}}return(s=b).\u0275fac=function(c){return new(c||s)(t.Y36(H.f),t.Y36(p._q),t.Y36(G.c),t.Y36(te.D),t.Y36(A.j),t.Y36(p.HT))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-upload-image"]],decls:33,vars:9,consts:[["slot","end"],["auto-hide","false"],["fullscreen","true","scrollX","false","scrollY","true",1,"ion-padding"],[2,"position","relative","text-align","center","padding","16px"],[2,"display","inline-block","margin","0","position","relative","z-index","2"],["fill","clear",2,"position","absolute","top","0","right","0","z-index","1"],["slot","icon-only","name","help-circle-outline",2,"font-size","1.5em"],[2,"margin-top","15px"],[1,"ion-text-center"],["size","12",2,"text-align","-webkit-center"],["fill","clear",3,"click",4,"ngIf"],["style","width: 80%",3,"src",4,"ngIf"],[2,"margin-top","20px"],[2,"margin-top","10px"],["size","12",2,"padding-left","15%","padding-right","15%"],["label","Label","placeholder","Please Select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["size","12"],[3,"disabled","click"],["fill","clear",3,"click"],["slot","icon-only","name","camera",2,"font-size","4.8em"],[2,"width","80%",3,"src"],[3,"value"]],template:function(c,n){1&c&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-menu-button",1),t.qZA()()(),t.TgZ(4,"ion-content",2)(5,"div",3)(6,"h2",4),t._uU(7," Upload Image "),t.qZA(),t.TgZ(8,"ion-button",5),t._UZ(9,"ion-icon",6),t.qZA()(),t.TgZ(10,"div",7)(11,"ion-grid",8)(12,"ion-row")(13,"ion-col",9),t.YNc(14,B,2,0,"ion-button",10),t.YNc(15,ne,1,1,"ion-img",11),t.qZA()(),t.TgZ(16,"ion-row",12)(17,"ion-col",9),t.YNc(18,re,2,0,"ion-button",10),t.YNc(19,J,1,1,"ion-img",11),t.qZA()(),t.TgZ(20,"ion-row",12)(21,"ion-col",9),t.YNc(22,ie,2,0,"ion-button",10),t.YNc(23,R,1,1,"ion-img",11),t.qZA()(),t.TgZ(24,"ion-row",13)(25,"ion-col",14)(26,"ion-item")(27,"ion-select",15),t.NdJ("ngModelChange",function(r){return n.label=r}),t.YNc(28,F,2,2,"ion-select-option",16),t.qZA()()()(),t.TgZ(29,"ion-row",12)(30,"ion-col",17)(31,"ion-button",18),t.NdJ("click",function(){return n.uploadImages()}),t._uU(32,"Submit"),t.qZA()()()()()()),2&c&&(t.xp6(14),t.Q6J("ngIf",!n.firstPicture.dataUrl),t.xp6(1),t.Q6J("ngIf",n.firstPicture.dataUrl),t.xp6(3),t.Q6J("ngIf",!n.secondPicture.dataUrl),t.xp6(1),t.Q6J("ngIf",n.secondPicture.dataUrl),t.xp6(3),t.Q6J("ngIf",!n.thirdPicture.dataUrl),t.xp6(1),t.Q6J("ngIf",n.thirdPicture.dataUrl),t.xp6(4),t.Q6J("ngModel",n.label),t.xp6(1),t.Q6J("ngForOf",n.labelsList),t.xp6(3),t.Q6J("disabled",!(n.label&&n.firstPicture.dataUrl&&n.secondPicture.dataUrl&&n.thirdPicture.dataUrl)))},dependencies:[d.sg,d.O5,Z.JJ,Z.On,p.YG,p.Sm,p.wI,p.W2,p.jY,p.Gu,p.gu,p.Xz,p.Ie,p.fG,p.Nd,p.t9,p.n0,p.sr,p.QI]}),b})()}];let Y=(()=>{var s;class b{}return(s=b).\u0275fac=function(c){return new(c||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[P.Bz.forChild(ae),P.Bz]}),b})(),K=(()=>{var s;class b{}return(s=b).\u0275fac=function(c){return new(c||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[d.ez,Z.u5,p.Pc,Y]}),b})()}}]);